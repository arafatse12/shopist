var designerControl=designerControl||{},localizationString;designerControl.onPageLoad={_init:function(){designerControl.event._dynamic_tab_event(),designer.event._chnage_dynamic_text(),designer.event._chnage_dynamic_text_fonts(),designer.event._chnage_dynamic_color(),designer.event._chnage_dynamic_text_align(),designer.event._chnage_dynamic_text_fontWeight(),designer.event._chnage_dynamic_text_decoration(),designer.event._chnage_dynamic_text_shadow(),designer.event._chnage_dynamic_more_options(),designer.event._enable_curved_text(),designer.event._remove_selected_object(),designer.event._curved_text_reverse_change(),designer.event._remove_design_modal(),designerControl.event._gallery_img_show(),designerControl.event._swap_panel(),designer.event._save_custom_design(),designer.event._remove_custom_design(),designerControl.event._gallery_img_add_at_canvas(),designer.event._add_to_cart_process(),$("#admin_all_msg_with_localization").length>0?localizationString=JSON.parse($("#admin_all_msg_with_localization").val()):$("#frontend_all_msg_with_localization").length>0&&(localizationString=JSON.parse($("#frontend_all_msg_with_localization").val())),$('[data-toggle="tooltip"]').tooltip(),$("#file_upload_for_designer").length>0&&(Dropzone.autoDiscover=!1,$("#file_upload_for_designer").dropzone({url:"/upload/designer-images",paramName:"designer_upload_images",acceptedFiles:"image/*",uploadMultiple:!1,maxFiles:1,autoProcessQueue:!0,parallelUploads:100,addRemoveLinks:!0,maxFilesize:1,headers:{"X-XSRF-TOKEN":$("#_token").val()},init:function(){this.on("maxfilesexceeded",function(a){swal("",localizationString.maxfilesexceeded_msg)}),this.on("error",function(a,b){return a.size>1048576?(swal("",localizationString.file_larger),this.removeFile(a),!1):a.type.match("image.*")?void 0:(swal("",localizationString.image_file_validation),this.removeFile(a),!1)}),this.on("success",function(a,b){"success"===b.status&&(swal(localizationString.good_job,localizationString.image_upload_success,"success"),$(".recently-uploaded-images").find(".recent-images-items").length>0?$(".recently-uploaded-images").find(".recent-images-items:last").after('<div class="recent-images-items"><img src="/public/uploads/'+b.img_name+'"></div>'):($(".no-available-msg").length>0&&$(".no-available-msg").remove(),$(".recently-uploaded-images").append('<div class="recent-images-items"><img src="/public/uploads/'+b.img_name+'"></div><div class="clear_both"></div>')),designerControl.event._gallery_img_add_at_canvas(),this.removeAllFiles())})}})),$("#designPreview").length>0&&$("#designPreview").on("hidden.bs.modal",function(){$("#designPreview .modal-body img").attr("src","")})}},designerControl.event={_dynamic_tab_event:function(){$(".nav-design-element").length>0&&$(".nav-design-element li").click(function(){allPanelHide(),"text"===$(this).data("tab_name")?designer.function._add_dynamic_text_to_design():"clipart"===$(this).data("tab_name")?designer.function._image_gallery():"image_upload"===$(this).data("tab_name")?designer.function._image_upload_option():"preview"===$(this).data("tab_name")&&designer.function._img_preview()})},_gallery_img_show:function(){$(".designer-image-gallery .gallery-items").length>0&&$(".designer-image-gallery .gallery-items").on("click",function(){var a=$(this);a.append('<div class="art-cat-img-loader"></div>'),$.ajax({url:$("#hf_base_url").val()+"/ajax/get-clipart-categories-images-with-html",type:"POST",cache:!1,headers:{"X-XSRF-TOKEN":$("#_token").val()},data:{id:$(this).data("cat_id")},success:function(b){b&&""!=b&&(a.parents(".designer-image-gallery").find(".art-cat-img-loader").remove(),$(".designer-image-gallery .panel-body .gallery-image-categories-list").after(b),$(".designer-image-gallery .panel-body .gallery-image-categories-list").hide(),show_gallery_image_cat_list_event(),designerControl.event._gallery_img_add_at_canvas())},error:function(){}})})},_gallery_img_add_at_canvas:function(){($(".categories-images-items").length>0||$(".recent-images-items").length>0)&&$(".categories-images-items, .recent-images-items").on("click",function(){$(this).hasClass("categories-images-items")?designer.function._dynamic_image_add_at_design("gallery_img",$(this).find("img").attr("src")):$(this).hasClass("recent-images-items")&&designer.function._dynamic_image_add_at_design("upload_image",$(this).find("img").attr("src"))})},_swap_panel:function(){if($(".icon-img-swap").length>0&&$("#swap-popover-content")){var a="bottom";$("#is_product_save").length>0&&(a="bottom"),$(".icon-img-swap").popover({placement:a,html:!0,content:function(){return $("#swap-popover-content").html()}}).parent().on("click",".design-title-items",function(){designer.function._manage_swap_content($(this))})}}};var show_gallery_image_cat_list_event=function(){$(".categories-images-list .show-categories-list").length>0&&$(".categories-images-list .show-categories-list").on("click",function(a){a.preventDefault(),show_gallery_image_cat_list()})},show_gallery_image_cat_list=function(){$(".gallery-image-categories-list").length>0&&$(".gallery-image-categories-list").show(),$(".categories-images-list").length>0&&$(".categories-images-list").remove()},_makeid=function(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<5;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a},_scaleImageSize=function(a,b,c,d){var e=d/c;return c>=a&&e<=1?(c=a,d=c*e):d>=b&&(d=b,c=d/e),[c,d]},allPanelHide=function(){canvasDeactivateAll(),"block"===$(".designer-text-control").css("display")&&$(".designer-text-control").hide(),"block"===$(".designer-image-gallery").css("display")&&$(".designer-image-gallery").hide(),"block"===$(".designer-image-edit-panel").css("display")&&$(".designer-image-edit-panel").hide(),"block"===$(".designer-upload-image").css("display")&&$(".designer-upload-image").hide(),$(".icon-img-swap").hasClass("in")&&$(".icon-img-swap").popover("hide")},createBlob=function(a){for(var b=atob(a.split(",")[1]),c=[],d=0;d<b.length;d++)c.push(b.charCodeAt(d));var e=new Blob([new Uint8Array(c)],{type:"image/png"});return e};$(document).ready(function(){designerControl.onPageLoad._init()});